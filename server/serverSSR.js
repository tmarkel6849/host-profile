!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=6)}([function(e,t){e.exports=require("react")},function(e,t,o){o(3).config();var n=o(14).Pool,s=o(15).totalHosts,r=new n({connectionString:"postgresql://postgres:sdc@ec2-52-27-91-99.us-west-2.compute.amazonaws.com:5432/hostprofiles"}),a=function(e,t){var o={cohosts:{},languages:{}},n=0,s=0,r=!0,a=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var l=c.value,d=!0,h=!1,f=void 0;try{for(var g,m=l[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var p=g.value;p.language?o.languages["language".concat(++s)]=p.language:p.id===t?o.host=p:o.cohosts["cohost".concat(++n)]={name:p.name,datejoined:p.datejoined,hosturl:p.hosturl}}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}}catch(e){a=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return o};e.exports={pool:r,getLastHostEntry:function(e){var t,o;r.query("SELECT DISTINCT hosts.id, hosts.name, hosts.description, hosts.interaction, hosts.datejoined, hosts.responserate, hosts.responsetime, hosts.hosturl FROM hosts INNER JOIN cohosts ON cohosts.host_id=$1 WHERE hosts.id=$1 OR hosts.id=cohosts.cohost_id;",[s],function(n,i){if(n)return console.error(n.message);r.query("SELECT DISTINCT languages.language FROM languages INNER JOIN hostlangs ON hostlangs.host_id=$1 WHERE languages.id=hostlangs.lang_id;",[s],function(n,r){if(n)return console.error(n.message);t=[i.rows,r.rows],o=a(t,s),e(o)})})},getRandomHost:function(e){var t,o,n,s,i=(o=19.368*Math.random(),t=o>9.14?10:o>4.61?9:o>2.44?8:o>1.32?7:o>.7?6:o>.36?5:o>.16?4:o>.06?3:o>.01?2:1,Math.ceil(1e6*Math.random())+1e6*(t-1));r.query("SELECT DISTINCT hosts.id, hosts.name, hosts.description, hosts.interaction, hosts.datejoined, hosts.responserate, hosts.responsetime, hosts.hosturl FROM hosts INNER JOIN cohosts ON cohosts.host_id=$1 WHERE hosts.id=$1 OR hosts.id=cohosts.cohost_id;",[i],function(t,o){t&&console.error(t.message),r.query("SELECT languages.language FROM languages INNER JOIN hostlangs ON hostlangs.host_id=$1 WHERE languages.id=hostlangs.lang_id;",[i],function(t,r){if(t)return console.error(t.message);n=[o.rows,r.rows],s=a(n,i),e(s)})})},getHost:function(e,t){var o,n;r.query("SELECT DISTINCT hosts.id, hosts.name, hosts.description, hosts.interaction, hosts.datejoined, hosts.responserate, hosts.responsetime, hosts.hosturl FROM hosts INNER JOIN cohosts ON cohosts.host_id=$1 WHERE hosts.id=$1 OR hosts.id=cohosts.cohost_id;",[e],function(s,i){s&&console.error(s.message),r.query("SELECT languages.language FROM languages INNER JOIN hostlangs ON hostlangs.host_id=$1 WHERE languages.id=hostlangs.lang_id;",[e],function(s,r){if(s)return console.error(s.message);o=[i.rows,r.rows],n=a(o,e),t(n)})})}}},function(e,t,o){"use strict";var n=o(0),s=o.n(n),r=o(5),a=o.n(r);function i(e){return s.a.createElement("div",{id:"photo-box-container"},s.a.createElement("div",{id:"photo-box"},s.a.createElement("a",{id:"photo-box-link",href:"http://lilbub.com/about"},s.a.createElement("img",{id:"host-image",src:e.hostUrl,title:e.name,alt:e.name}),s.a.createElement("div",{id:"script-name"},e.name))),s.a.createElement("a",{id:"below-image-link",href:"http://lilbub.com/about"},s.a.createElement("button",{id:"below-image-button"},"CONTACT")))}function c(e){var t=Object.keys(e.coHosts).length,o=t>0?"Co-hosts":"Co-host",n=[];for(var r in e.coHosts)n.push(e.coHosts[r]);return 0!==Object.keys(e.coHosts).length?s.a.createElement("div",{id:"cohosts-container"},s.a.createElement("div",{id:"cohosts-header"},o),n.map(function(e,o){return s.a.createElement("div",{className:o<t-1?"cohost":"cohost-last",key:o},s.a.createElement("img",{className:"cohost-picture",src:e.hosturl}),s.a.createElement("div",{className:"cohost-info"},s.a.createElement("div",{className:"cohost-name"},e.name),s.a.createElement("div",{className:"cohost-date-joined"},"Joined in ",e.datejoined)))})):s.a.createElement("div",null)}function u(e){return"none"===e.interaction?s.a.createElement("div",{id:"description-box"},s.a.createElement("div",{id:"hi-im"},"Hi, I'm ",e.name),s.a.createElement("div",{id:"description"},e.description),s.a.createElement(c,{coHosts:e.coHosts})):s.a.createElement("div",{id:"description-box"},s.a.createElement("div",{id:"hi-im"},"Hi, I'm ",e.name),s.a.createElement("div",{id:"description"},e.description),s.a.createElement("div",{id:"interaction-header"},"Interaction with guests"),s.a.createElement("div",{id:"interaction"},e.interaction),s.a.createElement(c,{coHosts:e.coHosts}))}function l(e){var t=2===Object.keys(e.languages)?"".concat(e.languages.language1,", ").concat(e.languages.language2):"".concat(e.languages.language1);return s.a.createElement("div",{id:"stats-box"},s.a.createElement("div",{id:"stats"},s.a.createElement("div",{id:"joined-in"},"Joined in ",e.dateJoined),s.a.createElement("div",{id:"languages"},"Languages: ",t),s.a.createElement("div",{id:"response-rate"},"Response rate: ",e.responseRate),s.a.createElement("div",{id:"response-time"},"Response time: ",e.responseTime)),s.a.createElement("a",{id:"button-link",href:"http://lilbub.com/about"},s.a.createElement("button",{id:"main-button"},"CONTACT")))}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){var o,n,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(o=!(s=f(t).call(this,e))||"object"!==d(s)&&"function"!=typeof s?g(n):s).state={id:e.data.host.id,name:e.data.host.name,description:e.data.host.description,interaction:e.data.host.interaction,coHosts:e.data.cohosts,dateJoined:e.data.host.datejoined,languages:e.data.languages,responseRate:e.data.host.responserate,responseTime:e.data.host.responsetime,hostUrl:e.data.host.hosturl},o.getHost=o.getHost.bind(g(o)),o}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,s.a.Component),o=t,(n=[{key:"componentDidMount",value:function(){this.getHost()}},{key:"getHost",value:function(){var e=this;fetch("http://".concat(window.location.hostname,":3005/postgres/randomentry")).then(function(e){return e.json()}).then(function(t){var o=t.host,n=t.cohosts,s=t.languages;e.setState({id:o.id,name:o.name,description:o.description,interaction:o.interaction,coHosts:n,dateJoined:o.datejoined,languages:s,responseRate:o.responserate,responseTime:o.responsetime,hostUrl:o.hosturl})})}},{key:"render",value:function(){var e=Object.keys(this.state.coHosts).length>0?"Meet your hosts":"Meet your host";return s.a.createElement("div",{id:"host-profile"},s.a.createElement("div",{id:"greeting"},e),s.a.createElement("div",{id:"host-info"},s.a.createElement(i,{name:this.state.name,hostUrl:this.state.hostUrl}),s.a.createElement("div",{id:"info-container"},s.a.createElement(u,{name:this.state.name,description:this.state.description,interaction:this.state.interaction,coHosts:this.state.coHosts}),s.a.createElement(l,{dateJoined:this.state.dateJoined,languages:this.state.languages,responseRate:this.state.responseRate,responseTime:this.state.responseTime}))),s.a.createElement("div",{id:"divider"}))}}])&&h(o.prototype,n),r&&h(o,r),t}();o(4),t.a=function(e,t){var o=a.a.renderToString(s.a.createElement(p,{data:t}));return e=e.replace(/(<div id="host">)(<\/div>)/,function(e,t,n){return t+o+n})}},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("react-testing-library")},function(e,t){e.exports=require("react-dom/server")},function(e,t,o){e.exports=o(7)},function(e,t,o){"use strict";o.r(t),function(e){var t=o(2);o(4);o(8),o(3).config();var n=o(9),s=o(10),r=o(11),a=o(12),i=o(13),c=o(1).getLastHostEntry,u=o(1).getRandomHost,l=o(1).getHost,d=process.env.PORT||3005,h=n();h.use(r()),h.use(n.static(a.join(e+"/../public"))),h.use(s.json()),h.use(s.urlencoded()),h.get("/",function(e,o){u(function(e){i.readFile("../public/index.html","utf8",function(n,s){var r=Object(t.a)(s,e);o.send(r)})})}),h.get("/proxy",function(e,o){var n=e.params.hostId;l(n,function(e){i.readFile("../public/proxy.html","utf8",function(n,s){if(n)return console.log("error reading file data: ",n),o.send(500);var r=Object(t.a)(s,e);o.send(r)})})}),h.get("/postgres/lastentry",function(e,t){c(function(e){return e?t.send(e):(console.log("error retrieving last entry"),t.send(400))})}),h.get("/postgres/randomentry",function(e,t){u(function(e){return e?t.send(e):(console.log("error retrieving random entry"),t.send(400))})}),h.get("./postgres/host",function(e,t){l(e.body,function(){return data||(console.error("error retrieveing host"),t.send(400)),t.send(data)})}),h.listen(d,function(){console.log("listening on port ".concat(d))})}.call(this,"/")},function(e,t){e.exports=require("newrelic")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("pg")},function(e,t){e.exports={lastSeededHost:0,lastSeededJoin:1,totalHosts:1e7,transactionCount:1,transactions:100,transaction:100001}}]);